---
phase: 04-react-islands-extraction
plan: 02
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - src/components/react/HeroSection.tsx
  - src/components/react/FeatureCard.tsx
  - src/pages/test-hero.astro
  - src/pages/test-features.astro
autonomous: true

must_haves:
  truths:
    - "HeroSection renders with fade-in animations"
    - "HeroSection CTA button has hover/tap animations"
    - "HeroSection CTA button links to #waitlist anchor"
    - "FeatureCard renders with whileInView animation"
    - "FeatureCard has hover lift effect (-5px)"
    - "Multiple FeatureCards render in a grid"
    - "All 4 FeatureCard icons render correctly (ClipboardList, MessagesSquare, LocateFixed, Banknote)"
  artifacts:
    - path: "src/components/react/HeroSection.tsx"
      provides: "Hero section with staggered animations"
      exports: ["default"]
      min_lines: 40
    - path: "src/components/react/FeatureCard.tsx"
      provides: "Feature card with viewport-based animation"
      exports: ["default"]
      min_lines: 30
  key_links:
    - from: "src/components/react/HeroSection.tsx"
      to: "framer-motion"
      via: "fadeIn animation"
      pattern: "whileInView.*opacity.*1"
    - from: "src/components/react/HeroSection.tsx"
      to: "#waitlist"
      via: "CTA button href"
      pattern: "href.*#waitlist"
    - from: "src/components/react/FeatureCard.tsx"
      to: "framer-motion"
      via: "viewport detection"
      pattern: "viewport.*once.*true"
    - from: "src/components/react/FeatureCard.tsx"
      to: "lucide-react"
      via: "icon mapping"
      pattern: "iconMap\\[icon\\]"
---

<objective>
Extract HeroSection and FeatureCard components from src/LandingPage.tsx into standalone React islands.

Purpose: Extract the animation-heavy components that will use client:idle (HeroSection) and client:visible (FeatureCard) hydration directives. These components demonstrate the viewport-based animation pattern.

Output:
- src/components/react/HeroSection.tsx
- src/components/react/FeatureCard.tsx
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-react-islands-extraction/04-RESEARCH.md
@src/LandingPage.tsx
@src/layouts/BaseLayout.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extract HeroSection component</name>
  <files>src/components/react/HeroSection.tsx</files>
  <action>
Extract the Hero Section from src/LandingPage.tsx (lines 82-111) into a standalone React component.

The HeroSection includes:
1. Container with pt-24 pb-16 padding (accounts for fixed navbar)
2. Main heading with fadeIn animation using spread operator ({...fadeIn})
3. "Group Travel App" text in orange highlight
4. Subheading paragraph with delayed fadeIn (transition={{ delay: 0.2 }})
5. "Get Early Access" CTA button with hover/tap animations
6. ArrowRight icon in button

Requirements:
- Import motion from 'framer-motion'
- Import ArrowRight from 'lucide-react'
- Define fadeIn animation object inside the component:
  ```tsx
  const fadeIn = {
    initial: { opacity: 0, y: 20 },
    whileInView: { opacity: 1, y: 0 },
    viewport: { once: true },
    transition: { duration: 0.5 }
  };
  ```
- Export as default function HeroSection()
- NO props needed (content is static)
- Keep all Tailwind classes exactly as they appear
- CTA button MUST link to href="#waitlist" (anchor link to waitlist section)

Pattern:
```tsx
import { motion } from 'framer-motion';
import { ArrowRight } from 'lucide-react';

const fadeIn = {
  initial: { opacity: 0, y: 20 },
  whileInView: { opacity: 1, y: 0 },
  viewport: { once: true },
  transition: { duration: 0.5 }
};

export default function HeroSection() {
  return (
    <div className="pt-24 pb-16 px-4">
      <div className="container mx-auto max-w-4xl text-center">
        <motion.h1 {...fadeIn} className="...">
          {/* heading content */}
        </motion.h1>
        {/* etc */}
        <motion.a href="#waitlist" ...>
          Get Early Access <ArrowRight />
        </motion.a>
      </div>
    </div>
  );
}
```

Copy exact JSX from lines 82-111 of LandingPage.tsx.
  </action>
  <verify>
1. File exists: ls src/components/react/HeroSection.tsx
2. TypeScript compiles: pnpm run check
3. Has fadeIn definition: grep -q "const fadeIn" src/components/react/HeroSection.tsx
4. CTA links to #waitlist: grep -q 'href="#waitlist"' src/components/react/HeroSection.tsx
  </verify>
  <done>
- HeroSection.tsx exists in src/components/react/
- Contains fadeIn animation object
- CTA button has href="#waitlist"
- TypeScript check passes
  </done>
</task>

<task type="auto">
  <name>Task 2: Extract FeatureCard component</name>
  <files>src/components/react/FeatureCard.tsx</files>
  <action>
Extract the FeatureCard from src/LandingPage.tsx (lines 131-141) into a standalone React component with props interface.

The FeatureCard includes:
1. motion.div with fadeIn variants
2. Hover lift animation (whileHover={{ y: -5 }})
3. Icon rendering (passed as prop)
4. Title and description text

Important: The original renders icons inline using feature.icon. For the island pattern, pass icon as a string and render it inside the component using a mapping approach.

Requirements:
- Import motion from 'framer-motion'
- Import all 4 icons used: ClipboardList, MessagesSquare, LocateFixed, Banknote from 'lucide-react'
- Create Props interface with: icon (string), title (string), description (string)
- Create icon mapping inside component (NOT passed as function prop - research warns against this)
- Define fadeIn inside component with viewport: { once: true }
- Export as default function FeatureCard({ icon, title, description }: Props)

Icon mapping pattern (research-compliant, avoids passing functions as props):
```tsx
import { ClipboardList, MessagesSquare, LocateFixed, Banknote, type LucideIcon } from 'lucide-react';

const iconMap: Record<string, LucideIcon> = {
  ClipboardList,
  MessagesSquare,
  LocateFixed,
  Banknote,
};

interface Props {
  icon: string;
  title: string;
  description: string;
}

export default function FeatureCard({ icon, title, description }: Props) {
  const Icon = iconMap[icon];
  // ...
}
```

This avoids the pitfall of passing React components as props which requires serialization.
  </action>
  <verify>
1. File exists: ls src/components/react/FeatureCard.tsx
2. TypeScript compiles: pnpm run check
3. Has icon mapping: grep -q "iconMap" src/components/react/FeatureCard.tsx
4. Has Props interface: grep -q "interface Props" src/components/react/FeatureCard.tsx
5. All 4 icons imported: grep -E "ClipboardList.*MessagesSquare.*LocateFixed.*Banknote|import.*\{.*ClipboardList" src/components/react/FeatureCard.tsx
  </verify>
  <done>
- FeatureCard.tsx exists with Props interface
- Icon mapping handles all 4 feature icons (ClipboardList, MessagesSquare, LocateFixed, Banknote)
- TypeScript check passes
- No function props (serialization safe)
  </done>
</task>

<task type="auto">
  <name>Task 3: Create test pages for HeroSection and FeatureCard</name>
  <files>src/pages/test-hero.astro, src/pages/test-features.astro</files>
  <action>
Create two test pages to verify the components render correctly in isolation.

**test-hero.astro:**
```astro
---
import BaseLayout from '../layouts/BaseLayout.astro';
import HeroSection from '../components/react/HeroSection.tsx';
---

<BaseLayout
  title="Hero Test"
  description="Testing HeroSection component in isolation"
>
  <HeroSection client:idle />

  <!-- Anchor target for CTA button verification -->
  <section id="waitlist" class="py-16 px-4 text-center bg-gray-50">
    <p class="text-gray-600">Waitlist anchor target (CTA should scroll here)</p>
  </section>

  <div class="py-16 px-4 text-center text-gray-500">
    <p>Scroll up to see the hero fade-in animation.</p>
    <p>Hover over "Get Early Access" button to see scale effect.</p>
    <p>Click "Get Early Access" to verify it scrolls to #waitlist.</p>
  </div>
</BaseLayout>
```

Uses client:idle because hero animations enhance UX but aren't critical for immediate interactivity.

**test-features.astro:**
```astro
---
import BaseLayout from '../layouts/BaseLayout.astro';
import FeatureCard from '../components/react/FeatureCard.tsx';
---

<BaseLayout
  title="Features Test"
  description="Testing FeatureCard component in isolation"
>
  <div class="py-16 bg-gray-50">
    <div class="container mx-auto px-4">
      <h1 class="text-2xl font-bold text-center mb-8">Feature Cards Test</h1>
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
        <FeatureCard
          client:visible
          icon="ClipboardList"
          title="Trip Planning & Management"
          description="Plan, manage, and collaborate on group trips with destination search and shared tools."
        />
        <FeatureCard
          client:visible
          icon="MessagesSquare"
          title="Real-time Communication"
          description="Stay connected with group chat, real-time messaging, media sharing, and read receipts."
        />
        <FeatureCard
          client:visible
          icon="LocateFixed"
          title="Location Services"
          description="Share live locations, explore interactive maps, and discover nearby places together."
        />
        <FeatureCard
          client:visible
          icon="Banknote"
          title="Financial Management"
          description="Track expenses effortlessly and split costs fairly among your travel group."
        />
      </div>
    </div>
  </div>

  <div class="py-8 text-center text-gray-500">
    <p>Scroll down to trigger whileInView animations.</p>
    <p>Hover over cards to see the lift effect (-5px).</p>
    <p>Verify all 4 icons render correctly (clipboard, messages, location pin, banknote).</p>
  </div>
</BaseLayout>
```

Uses client:visible because feature cards are below fold and should hydrate when scrolled into view.
  </action>
  <verify>
1. Files exist: ls src/pages/test-hero.astro src/pages/test-features.astro
2. test-hero has #waitlist anchor: grep -q 'id="waitlist"' src/pages/test-hero.astro
3. test-features has all 4 icons: grep -c 'icon="' src/pages/test-features.astro (should be 4)
4. Dev server starts: pnpm run dev
5. Pages load without errors:
   - curl http://localhost:4321/test-hero/
   - curl http://localhost:4321/test-features/
  </verify>
  <done>
- test-hero.astro and test-features.astro exist
- test-hero.astro has #waitlist anchor for CTA verification
- test-features.astro renders all 4 feature cards with different icons
- Both pages accessible without errors
- HeroSection renders with client:idle
- FeatureCards render with client:visible
  </done>
</task>

</tasks>

<verification>
Run complete verification sequence:

```bash
# 1. Check all files exist
ls -la src/components/react/HeroSection.tsx src/components/react/FeatureCard.tsx

# 2. TypeScript validation
pnpm run check

# 3. Test pages exist
ls src/pages/test-hero.astro src/pages/test-features.astro

# 4. Verify CTA links to #waitlist
grep -q 'href="#waitlist"' src/components/react/HeroSection.tsx && echo "CTA wiring OK"

# 5. Verify all 4 icons in FeatureCard
grep "ClipboardList" src/components/react/FeatureCard.tsx && \
grep "MessagesSquare" src/components/react/FeatureCard.tsx && \
grep "LocateFixed" src/components/react/FeatureCard.tsx && \
grep "Banknote" src/components/react/FeatureCard.tsx && \
echo "All 4 icons present"

# 6. Dev server test (quick check)
pnpm run dev &
sleep 3
curl -s http://localhost:4321/test-hero/ | grep -q "Hero Test" && echo "Hero page OK"
curl -s http://localhost:4321/test-features/ | grep -q "Features Test" && echo "Features page OK"
```

Manual verification (recommended):
1. Open http://localhost:4321/test-hero/ - see fade-in animation
2. Click "Get Early Access" CTA - should scroll to #waitlist section
3. Open http://localhost:4321/test-features/ - scroll to trigger whileInView
4. Verify all 4 icons render (clipboard, messages, location, banknote)
5. Hover over cards to see lift effect
6. Check browser console - no hydration errors
</verification>

<success_criteria>
1. HeroSection.tsx and FeatureCard.tsx exist in src/components/react/
2. pnpm run check passes without errors
3. HeroSection CTA button has href="#waitlist"
4. HeroSection renders with fade-in animation at /test-hero/
5. FeatureCard renders with hover lift animation at /test-features/
6. All 4 feature cards display with correct icons (visually verify each icon renders)
7. No hydration mismatch errors in browser console
</success_criteria>

<output>
After completion, create `.planning/phases/04-react-islands-extraction/04-02-SUMMARY.md`
</output>
