---
phase: 01-foundation-setup
plan: 05
type: execute
wave: 3
depends_on: ["01-03", "01-04"]
files_modified:
  - src/layouts/BaseLayout.astro
  - src/pages/test.astro
autonomous: true

must_haves:
  truths:
    - "Test page renders at localhost:4321/test"
    - "Tailwind CSS classes style the test page correctly"
    - "Meta tags appear in page source (view-source:localhost:4321/test)"
    - "BaseLayout accepts title and description props"
  artifacts:
    - path: "src/layouts/BaseLayout.astro"
      provides: "Shared layout with SEO meta tags"
      min_lines: 40
      exports: ["default"]
    - path: "src/pages/test.astro"
      provides: "Verification page for setup"
      min_lines: 20
  key_links:
    - from: "src/pages/test.astro"
      to: "src/layouts/BaseLayout.astro"
      via: "import statement"
      pattern: "import BaseLayout from"
    - from: "src/layouts/BaseLayout.astro"
      to: "src/styles/global.css"
      via: "import statement"
      pattern: "import.*global.css"
---

<objective>
Create BaseLayout.astro with SEO meta tags and a test page to verify the complete setup.

Purpose: BaseLayout establishes the pattern for all Astro pages with consistent SEO meta tags, Open Graph properties, and Twitter cards. The test page validates that Astro, TypeScript, and Tailwind are all working together correctly.

Output: Working test page at localhost:4321/test with styled content and visible meta tags in page source.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-setup/01-RESEARCH.md

# Depends on Plan 03 (TypeScript configured) and Plan 04 (Tailwind configured)
# src/styles/global.css must exist from Plan 04
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create BaseLayout.astro with SEO meta tags</name>
  <files>src/layouts/BaseLayout.astro</files>
  <action>
1. Create src/layouts/ directory:

```bash
mkdir -p src/layouts
```

2. Create src/layouts/BaseLayout.astro:

```astro
---
// src/layouts/BaseLayout.astro
import '../styles/global.css';

interface Props {
  title: string;
  description: string;
  ogImage?: string;
}

const {
  title,
  description,
  ogImage = 'https://nomadcrew.uk/og-image.jpg'
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <meta name="generator" content={Astro.generator} />

    <!-- SEO Meta Tags -->
    <title>{title} | NomadCrew</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={canonicalURL} />

    <!-- Open Graph -->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:site_name" content="NomadCrew" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImage} />
  </head>
  <body class="min-h-screen bg-white text-gray-900 antialiased">
    <slot />
  </body>
</html>
```

Key features:
- Imports global.css for Tailwind styles
- TypeScript Props interface for type safety
- SEO meta tags (title, description, canonical)
- Open Graph tags for social sharing
- Twitter Card tags
- Slot for page content
- Base body styles with Tailwind
  </action>
  <verify>
Run: `cat src/layouts/BaseLayout.astro | head -30` - shows Props interface and imports
Run: `grep "og:title" src/layouts/BaseLayout.astro` - shows Open Graph tags
Run: `grep "twitter:card" src/layouts/BaseLayout.astro` - shows Twitter Card tags
  </verify>
  <done>
- src/layouts/BaseLayout.astro exists
- Props interface defines title, description, ogImage
- SEO meta tags present (title, description, canonical)
- Open Graph meta tags present
- Twitter Card meta tags present
- Imports global.css for Tailwind
- Has slot for content injection
  </done>
</task>

<task type="auto">
  <name>Task 2: Create test page and verify complete setup</name>
  <files>src/pages/test.astro</files>
  <action>
1. Create src/pages/ directory:

```bash
mkdir -p src/pages
```

2. Create src/pages/test.astro:

```astro
---
// src/pages/test.astro
import BaseLayout from '../layouts/BaseLayout.astro';

// This runs at build time (server-side)
const buildTime = new Date().toISOString();
---

<BaseLayout
  title="Astro Setup Test"
  description="Verifying Astro 5.x configuration for NomadCrew landing page"
>
  <main class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8">
    <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8">
      <h1 class="text-4xl font-bold text-gray-900 mb-4">
        Astro is Working!
      </h1>

      <div class="space-y-4 text-gray-700">
        <p class="text-lg">
          If you can see this page with Tailwind styles, the foundation setup is complete.
        </p>

        <div class="bg-green-100 border-l-4 border-green-500 p-4">
          <p class="font-semibold">Astro 5.x initialized</p>
          <p class="font-semibold">TypeScript configured</p>
          <p class="font-semibold">Tailwind CSS working</p>
          <p class="font-semibold">BaseLayout rendering</p>
        </div>

        <p class="text-sm text-gray-500">
          Build time: {buildTime}
        </p>
      </div>

      <div class="mt-8 p-4 bg-gray-100 rounded">
        <h2 class="text-xl font-semibold mb-2">Verification Checklist:</h2>
        <ol class="list-decimal list-inside space-y-1 text-gray-600">
          <li>This page renders at localhost:4321/test</li>
          <li>Tailwind gradient and typography styles visible</li>
          <li>View page source shows meta tags from BaseLayout</li>
          <li>npm run check passes without errors</li>
        </ol>
      </div>
    </div>
  </main>
</BaseLayout>
```

3. Verification steps to perform:

a. Start dev server:
```bash
npm run dev
```

b. Visit http://localhost:4321/test in browser

c. Verify visually:
   - Page renders with gradient background (blue to indigo)
   - White card with shadow visible
   - Green success box with checkmarks
   - Typography styled correctly

d. Check page source (Ctrl+U or View > Page Source):
   - <title>Astro Setup Test | NomadCrew</title>
   - <meta name="description" content="Verifying...">
   - <meta property="og:title" content="Astro Setup Test">

e. Run TypeScript check:
```bash
npm run check
```
  </action>
  <verify>
Run: `npm run dev` - starts without errors
Visit: http://localhost:4321/test - page renders
View source: Meta tags visible in HTML head
Run: `npm run check` - passes without errors
  </verify>
  <done>
- src/pages/test.astro exists
- Page accessible at localhost:4321/test
- Tailwind styles render correctly (gradient, typography, shadows)
- Meta tags visible in page source
- npm run check passes
- Build time displays (proves server-side code runs)
  </done>
</task>

</tasks>

<verification>
1. Layout exists: `cat src/layouts/BaseLayout.astro | wc -l` (should be ~50+ lines)
2. Page exists: `cat src/pages/test.astro | wc -l` (should be ~40+ lines)
3. Dev server: `npm run dev` starts on port 4321
4. Page renders: http://localhost:4321/test shows styled content
5. Meta tags: View page source shows title, description, OG tags
6. TypeScript: `npm run check` passes
</verification>

<success_criteria>
- BaseLayout.astro created with Props interface and SEO meta tags
- Test page renders at localhost:4321/test
- Tailwind CSS classes style the page correctly
- Meta tags visible in page source (title, description, og:*, twitter:*)
- npm run check passes without errors
- All Phase 1 success criteria met:
  1. Developer can run `npm run dev` and view Astro site at localhost:4321 [VERIFIED]
  2. TypeScript compilation works without errors (astro check passes) [VERIFIED]
  3. .well-known files are accessible at /.well-known/[filename] [Verify in browser: localhost:4321/.well-known/assetlinks.json]
  4. Test page renders with BaseLayout showing meta tags in page source [VERIFIED]
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-setup/01-05-SUMMARY.md`
</output>
