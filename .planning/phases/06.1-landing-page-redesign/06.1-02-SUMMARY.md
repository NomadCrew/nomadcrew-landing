---
phase: 06.1-landing-page-redesign
plan: 02
subsystem: parallax-hero
tags: [parallax, lenis, framer-motion, smooth-scroll, accessibility, react-islands]

dependency_graph:
  requires:
    - 06.1-01 (design tokens, lenis library, hero images)
  provides:
    - smooth-scroll-provider-component
    - parallax-hero-component
    - parallax-test-page
  affects:
    - 06.1-03 (warm minimalist styling)
    - 06.1-05 (landing page integration)

tech_stack:
  added: []
  patterns:
    - Lenis smooth scroll wrapper component
    - Framer Motion useScroll/useTransform for parallax
    - useReducedMotion accessibility hook
    - Client-side mobile detection with resize listener
    - Astro island hydration (client:load)

key_files:
  created:
    - src/components/react/SmoothScrollProvider.tsx
    - src/components/react/ParallaxHero.tsx
    - src/pages/test-parallax.astro
  modified: []

decisions:
  - id: lenis-wrapper-pattern
    context: How to provide Lenis smooth scroll to child components
    choice: Provider component wrapping children with useEffect lifecycle
    rationale: Clean separation, proper cleanup on unmount, reusable pattern
  - id: parallax-intensity-mobile
    context: Mobile parallax performance considerations
    choice: Reduce parallax intensity by 50% on viewport < 768px
    rationale: Balance visual effect with mobile GPU performance
  - id: reduced-motion-behavior
    context: Accessibility for users who prefer reduced motion
    choice: Set parallax multiplier to 0 when prefers-reduced-motion detected
    rationale: WCAG compliance - parallax completely disabled for accessibility

metrics:
  duration: 4 minutes
  completed: 2026-01-31
---

# Phase 6.1 Plan 02: Parallax Hero Section Summary

**Lenis smooth scroll wrapper and 3-layer parallax hero with bottom reveal text/CTA and accessibility support**

## What Was Done

### Task 1: SmoothScrollProvider Component
- Created `src/components/react/SmoothScrollProvider.tsx`
- Lenis initialization with configuration:
  - duration: 1.2 seconds
  - exponential easing for smooth scroll feel
  - smoothWheel: true, wheelMultiplier: 1.0
- requestAnimationFrame loop for Lenis.raf()
- Proper cleanup on unmount (lenis.destroy())
- TypeScript interface for children prop

### Task 2: ParallaxHero Component
- Created `src/components/react/ParallaxHero.tsx` (158 lines)
- **Three parallax layers:**
  - Background (layer-3): 30vh max translation - slowest
  - Midground (layer-2): 60vh max translation - medium
  - Foreground (layer-1): 100vh max translation - fastest
- **Scroll tracking:** useScroll with container ref, offset: ['start start', 'end start']
- **Bottom reveal content:**
  - Headline: "Travel Together, Effortlessly"
  - Subheadline: Value proposition text
  - CTA button: "Join the Waitlist" with accent color styling
  - whileInView animation (opacity 0->1, y 60->0)
- **Accessibility:**
  - useReducedMotion hook disables all parallax movement
  - ARIA labels on hero section
  - aria-hidden on decorative images
- **Mobile optimization:**
  - Client-side viewport detection (< 768px)
  - Parallax intensity reduced by 50% on mobile
  - will-change-transform for GPU acceleration
- **Styling:**
  - Gradient overlay (from-black/70) for text contrast
  - Design token CSS variables for colors
  - Hover/active states on CTA button

### Task 3: Test Page
- Created `src/pages/test-parallax.astro`
- SmoothScrollProvider + ParallaxHero with client:load
- Spacer content below hero for scroll testing
- Manual verification checklist
- Instructions for testing reduced motion preference

## Decisions Made

| Decision | Context | Choice | Rationale |
|----------|---------|--------|-----------|
| Lenis wrapper pattern | Smooth scroll integration | Provider component with useEffect | Clean lifecycle, proper cleanup, reusable |
| Mobile parallax reduction | Performance on mobile devices | 50% intensity reduction | Balance visual effect with GPU performance |
| useReducedMotion behavior | Accessibility compliance | Completely disable parallax (multiplier=0) | WCAG compliance for motion-sensitive users |

## Verification Results

| Criteria | Status |
|----------|--------|
| SmoothScrollProvider.tsx exists and exports default | PASS |
| ParallaxHero.tsx exists with useScroll/useTransform | PASS |
| test-parallax.astro exists | PASS |
| pnpm run check passes (0 errors) | PASS |
| pnpm run dev starts without errors | PASS |
| ParallaxHero uses useReducedMotion hook | PASS |
| ParallaxHero >= 80 lines | PASS (158 lines) |

## Deviations from Plan

None - plan executed exactly as written.

## Commits

| Hash | Type | Description |
|------|------|-------------|
| 8ae8045 | feat | Create SmoothScrollProvider component |
| 8676bca | feat | Create ParallaxHero component with bottom reveal |
| 29dceab | feat | Add parallax hero test page |

## Files Changed

```
created:  src/components/react/SmoothScrollProvider.tsx (35 lines)
created:  src/components/react/ParallaxHero.tsx (158 lines)
created:  src/pages/test-parallax.astro (38 lines)
```

## Next Phase Readiness

**Ready for 06.1-03:** Warm minimalist component styling
- SmoothScrollProvider available for page-level smooth scrolling
- ParallaxHero ready for integration into main landing page
- Design tokens from 06.1-01 can be applied to other components
- Test page at /test-parallax for ongoing verification

**Manual testing recommended:**
- Visit http://localhost:4321/test-parallax
- Scroll to verify parallax effect (layers move at different speeds)
- Test reduced motion preference (DevTools > Command Palette > "reduced motion")
- Test mobile viewport (DevTools responsive mode < 768px width)
